<?xml version="1.0" encoding="UTF-8"?>
<ui:composition template="/resources/templates/templateCRUD.xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core">

	<ui:param name="mbean" value="${questionarioFaces}" />
	<ui:param name="mbeanModel" value="${questionarioFaces.crudModel}" />
	<ui:param name="mbeanPesquisaModel"
		value="${questionarioFaces.crudPesquisaModel}" />
	<ui:param name="reload" value="true" />

	<ui:define name="cadastro">
		<h:panelGrid columns="1" style="width:50%">

			<p:outputLabel for="item" value="Item" />

			<p:selectOneMenu id="item" value="#{mbeanModel.item.id}"
				required="true" requiredMessage="Tipo de questionario obrigatório"
				style="width:94.5%">
				<f:selectItem itemLabel="Não Selecionado" itemValue="" />
				<f:selectItems value="#{mbean.comboItem}" />
			</p:selectOneMenu>


			<h:panelGrid columns="2" styleClass="coluna100" columnClasses="coluna50 coluna50">

				<p:outputLabel for="protocolo" value="Protocolo" />
				<p:outputLabel for="tipoQuestionario" value="Tipo de questionário" />
				
				<p:selectOneMenu id="protocolo" value="#{mbeanModel.protocolo.id}" required="true" label="Protocolo" style="width:90%">
					<f:selectItem itemLabel="Não Selecionado" itemValue="" />
					<f:selectItems value="#{mbean.comboProtocolo}" />
				</p:selectOneMenu>
				
				<p:selectOneMenu id="tipoQuestionario"
					value="#{mbeanModel.tipoQuestionario.id}" required="true"
					label="Tipo de questionário"
					style="width:90%">
					<f:selectItem itemLabel="Não Selecionado" itemValue="" />
					<f:selectItems value="#{mbean.comboTipoQuestionario}" />
				</p:selectOneMenu>

			</h:panelGrid>

			<h:outputText value="Pergunta" />
			<p:inputText id="pergunta" required="true"
				requiredMessage="Pergunta obrigatório" maxlength="250"
				value="#{mbeanModel.pergunta}" styleClass="coluna100" />



		</h:panelGrid>


		<h:panelGrid columns="1" style="width:100%">

			<p:commandButton id="adicionar" value="Adicionar Resposta"
				icon="ui-icon-plus" action="#{mbean.adicionarResposta}"
				process="@this panelRespostasAdicionados" />

			<p:outputPanel autoUpdate="true" id="panelRespostasAdicionados"
				style="width:100%; max-height:145px; overflow:auto" layout="block">

				<p:dataTable rowIndexVar="index" id="gridResposta"
					emptyMessage="Nenhuma resposta" value="#{mbeanModel.respostas}"
					var="resposta" style="margin-top: 3px; margin-bottom: 10px;">

					<p:column headerText="Resposta" styleClass="coluna45">
						<div align="center">
							<p:inputText styleClass="coluna90" value="#{resposta.descricao}" />
						</div>
					</p:column>
					<!-- 
					<p:column headerText="Observação" styleClass="coluna45">
						<p:inputText styleClass="coluna90" value="#{resposta.observacao}" />
					</p:column>

					<p:column headerText="Resposta Certa" styleClass="coluna10">
						<div align="center">
							<p:selectBooleanCheckbox value="#{resposta.flagrespostacerta}" />
						</div>
					</p:column> -->

					<p:column style="width:45%" headerText="Remover?">
						<div align="center">
							<p:commandLink global="false" process="@this"
								action="#{mbean.removerResposta(index)}">

								<img alt="Remover" title="Remover"
									src="#{request.contextPath}/resources/images/delete16.png" />
							</p:commandLink>
						</div>
					</p:column>
				</p:dataTable>
			</p:outputPanel>
		</h:panelGrid>

		<p:fieldset legend="Galeria de Imagens" style="width:95%"
			rendered="false">

			<p:fileUpload id="uploadArquivo" label="Adicionar Imagem"
				fileUploadListener="#{mbean.uploadMidias}" auto="true"
				multiple="true" allowTypes="/(\.|\/)(|jpe?g|png)$/" process="@this"
				style="width: 95%" update="opImagens" />

			<br />
			<p:outputPanel id="opImagens">
				<p:dataGrid columns="5" var="imagem" emptyMessage="Nenhuma Imagem"
					value="#{mbeanModel.imagens}">
					<p:column>
						<img src="/arquivos_cardapio/#{imagem.caminho}"
							style="max-height: 95px; max-width: 245px" alt="Logomarca" />
					</p:column>
				</p:dataGrid>
			</p:outputPanel>
		</p:fieldset>



		<p:selectBooleanCheckbox value="#{mbeanModel.status}"
			itemLabel="Status:" />


	</ui:define>
	<ui:define name="pesquisaCampos">
		<p:outputLabel for="descricaoPesquisa" value="Pergunta" />
		<p:inputText id="descricaoPesquisa"
			value="#{mbeanPesquisaModel.pergunta}" styleClass="coluna90" />

	</ui:define>
	<ui:define name="colunasTabela">

		<p:column headerText="Pergunta">
			<h:outputText value="#{linha.pergunta}" />
		</p:column>

	</ui:define>

</ui:composition>



